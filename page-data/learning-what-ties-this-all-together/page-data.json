{"componentChunkName":"component---src-templates-blog-post-js","path":"/learning-what-ties-this-all-together/","result":{"data":{"site":{"siteMetadata":{"title":"Keith Choa"}},"markdownRemark":{"id":"af35fd7d-043f-5659-ae9e-4e6406a3293b","excerpt":"The Story Recently, I set myself the goal of learning more about Web Development. So, I thought, what better way than to create my own blog? I started by…","html":"<h1>The Story</h1>\n<p>Recently, I set myself the goal of learning more about Web Development. So, I thought, what better way than to create my own blog? I started by brushing off my rusty JavaScript skills (the last time I wrote anything in JavaScript was probably 2015), sat myself in a crash course on React.js, and in another course on gatsby.js, and I got to work.</p>\n<p>I watched <a href=\"https://www.youtube.com/watch?v=Ke90Tje7VS0\">this</a> wonderful course on React.js by a channel named <strong>Programming with Mosh</strong>. I thoroughly enjoyed it, and I learnt a LOT about React’s component-based system. Then, armed with that knowledge, I followed gatsby.js’ <a href=\"https://www.gatsbyjs.org/docs/\">wonderful documentation</a>, as well as some <a href=\"https://www.youtube.com/watch?v=6YhqQ2ZW1sc\">video tutorials</a>. However, I find the best way to learn is always in practice. So, I set out looking for a template to get my hands dirty.</p>\n<p>While doing research, I found <a href=\"https://github.com/alxshelepenok/gatsby-starter-lumen\">this</a> template, which was developed by Alexander Shelepenok. I knew about this, as I have recently been reading <a href=\"https://victorzhou.com/\">Victor Zhou’s Website</a>, and found out that he helped design the template, and his website itself is a prime example of it. However, this particular template was far too complicated for my needs. It had several features that I felt like I didn’t really need with this blog (yet). These were things such as CMS compatibility, a docker deployment system, flow, jest (for testing, though I’ll eventually need that), and more.</p>\n<p>So, I came across this much more simple template here, which I was able to navigate with much more ease: <a href=\"https://github.com/gatsbyjs/gatsby-starter-blog\">Link to Repository</a>. It was developed by Kyle Matthews, the founder of Gatsby.js. It’s much more bare-bones, and I’ve been having a blast learning about all the nuances by diving deep into this template.</p>\n<h1>What I learnt</h1>\n<p>I’d like to bring you through a brief journey of everything I’ve learnt so far. As someone completely new to web development, you’ll be able to see all the oddly specific things I’ve learnt. If you’re completely new to web development, this might be a useful guide for you. If not, well, I hope you at least get a little laugh out of this.</p>\n<p>Anyway, to start off, I found I needed to learn about node.js, and in particular the package manager.</p>\n<h2>Node.js Package Manager</h2>\n<p>Package managers are not unfamiliar to me, but it’s always an interesting experiencing discovering a new one altogether. I’m very familiar with <code class=\"language-text\">homebrew</code> and <code class=\"language-text\">pip</code>, as I use those quite a lot on my local python environment on my mac. With web development, the new package management system I had to learn was <code class=\"language-text\">npm</code>. You can install npm yourself if you have homebrew with <code class=\"language-text\">brew install npm</code>.</p>\n<p>Unsuprisingly, <code class=\"language-text\">npm</code> stands for “Node.js Package Manager”, and is a quick and easy way to download javascript-related dependencies. No knowledge of node.js is necessary to use it, but it seems to be the standard that people use in order to set up their dependencies.</p>\n<p>This includes, installing gatsby and react. To install the gatsby-cli (Command Line Interface) you simply enter <code class=\"language-text\">npm i -g gatsby-cli</code> into your command terminal. <code class=\"language-text\">i</code> means install, and <code class=\"language-text\">-g</code> means install globally (if that’s what you want). It <em>should</em> install all dependencies for you, but if not, you can do <code class=\"language-text\">npm install npm-install-peers</code> and run <code class=\"language-text\">npm-install-peers</code>.</p>\n<h2>Using Gatsby-CLI</h2>\n<p>If you follow Gatsby.js’ <a href=\"https://www.gatsbyjs.org/docs/\">wonderful documentation</a> mentioned earlier, they bring you through the whole process of either cloning a template, or starting a website of your own. I highly suggest reading it, so I won’t spoil the secrets for you here ;)</p>\n<h2>Navigating and learning about the template</h2>\n<p>I never realised how much there would be to such a simple template. Looks really do deceive. Below, I have laid out everything I have learnt about the template, and exactly how it works. I’d like to bring to light the ingenious process of how gatsby.js dynamically creates web pages based on simple markdown files. I discuss it in detail below, but it’s mind-blowing how interconnected and subtle the system is. As a programmer who has never done much web-development, this was really an eye-opener.</p>\n<p><strong>Here’s a reference tree-diagram of the file system, which will help in understanding what I am about to discuss:</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">src\n├── components\n│   ├── bio.js\n│   ├── layout.js\n│   └── seo.js\n├── pages\n│   ├── 404.js\n│   └── index.js\n├── templates\n│   └── blog-post.js\n└── utils\n    └── typography.js\n\ncontent\n├── assets\n│   ├── gatsby-icon.png\n│   └── profile-pic.jpg\n└── blog\n    ├── hello-world\n    │   ├── 000011.JPG\n    │   └── index.md\n    ├── my-second-post\n    │   └── index.md\n    └── new-beginnings\n        └── index.md</code></pre></div>\n<p>In general, my blog (as of 2020-04-30) contains two types of pages. What i’ll call <strong>regular pages</strong>, and the <strong>blog pages</strong>. Regular pages are hard-coded, but the blog pages are much more interesting, as you’ll see below.</p>\n<h1><strong>Regular Pages</strong></h1>\n<p>Regular pages, that is, hard-coded pages (such as index.html and 404.html) are stored in <code class=\"language-text\">src/pages/</code>. Gatsby recognizes this, and these are compiled when <code class=\"language-text\">gatsby deploy</code> is run.</p>\n<h1><strong>Blog Pages</strong></h1>\n<p>Each blog page (like the one you are reading now) is not <em>manually</em> created. A template exists in <code class=\"language-text\">src/templates/blog-post.js</code> and the functions (made using a Node* API) written in <code class=\"language-text\">gatsby-node.js</code> create the pages dynamically by using a <code class=\"language-text\">GraphQL</code> query to query the posts from <code class=\"language-text\">/content/blog</code>. The files inside <code class=\"language-text\">/content/blog/</code> are markdown files.</p>\n<h3>How are the markdown files processed?</h3>\n<p>The <code class=\"language-text\">content/blog</code> folder contains markdown files of the blog posts (like this one!). The path of these files is stored in gatsby-config.js, where the <code class=\"language-text\">gatsby-source-filesystem</code> plugin convers these files into nodes*. Then, the <code class=\"language-text\">gatsby-transformer-remark</code> plugin converts those nodes into <code class=\"language-text\">MarkdownRemark</code> nodes, which GraphQL can query later on.</p>\n<p>*Note: “Node” is the name associated with all data added to Gatsby. I’m actually not too sure how this works. inside <code class=\"language-text\">gatsby-node.js</code>, there exists an <code class=\"language-text\">exports.onCreateNode()</code> function, which I don’t fully understand. I tried looking into the documentation, but couldn’t find much on it.</p>\n<h3>How does the template work?</h3>\n<p>The template is essentially a React.js component, that works with the gatsby-node.js file (discussed later).</p>\n<h4>Data sources</h4>\n<p>It takes in three sources of data:</p>\n<ol>\n<li><strong><strong>data</strong></strong><br>\nan object that contains query data within src/templates/blog-post.js. This is passed in when GraphQL is run within the same javascript file. This particular query takes in the <code class=\"language-text\">slug</code> variable from <code class=\"language-text\">gatsby-note.js</code> and queries one markdown file’s worth of data (this process is done recursively, as seen later).</li>\n</ol>\n<p>This contains the following data:</p>\n<ul>\n<li>Title of the website</li>\n<li>Blog slug</li>\n<li>Blog ID (GraphQL ID)</li>\n<li>160 Word excerpt of the article</li>\n<li>Title of the blog</li>\n<li>The date of the blog</li>\n<li>The description of the blog</li>\n<li><strong><strong>pageContext</strong></strong><br>\nan object that contains data passed from <code class=\"language-text\">gatsby-node.js</code>. The <code class=\"language-text\">createPage()</code> function returns a dictionary that contains the <code class=\"language-text\">context</code> object, which is passed to the template file. The <code class=\"language-text\">context</code> object can be referenced using the keyword <code class=\"language-text\">pageContext</code>.</li>\n</ul>\n<p>This contains the following data:</p>\n<ul>\n<li>Blog slug</li>\n<li>Blog title</li>\n</ul>\n<p>According to <a href=\"https://www.gatsbyjs.org/docs/why-gatsby-uses-graphql/\">the guide</a>, it’s not highly suggested to pass all information as a context, as it often gets unweildy to manage as development progresses. So, only key identifying information is passed, and then subsequent queries are run.</p>\n<ol start=\"3\">\n<li><strong><strong>location</strong></strong><br>\nan object that contains information about the site URL, host name, port, protocol, etc. (<em>I’m not sure what sends this information</em>).</li>\n</ol>\n<p>All three of these data sources are used to fill in the page</p>\n<h4>Populating the Page</h4>\n<p>First, it populates the <strong>SEO</strong>. That is, the <em>Search Engine Optimization</em>. This is essentially the metadata in the HTML. This is actually a component stored in <code class=\"language-text\">/src/components/seo.js</code>, which is used with the two properties <code class=\"language-text\">title = title={post.frontmatter.title}</code> and <code class=\"language-text\">description={post.frontmatter.description || post.excerpt}</code>, where <code class=\"language-text\">const post = data.markdownRemark</code>. Basically, it uses these input variables to populate the various metadata that allows search engines to accurately understand the content of the page, making it more attractive to the user. Upon further research, this is an entire marketing tool in and of itself, and something I might want to look into. However, we must push on.</p>\n<p>Then, it populates the article, using a react.js <code class=\"language-text\">&lt;article&gt;</code> component. This takes in the <code class=\"language-text\">post.html</code>, <code class=\"language-text\">post.title</code>, etc. from <code class=\"language-text\">data</code>, and fills it in with the proper styling.</p>\n<p>After that, the <code class=\"language-text\">&lt;bio&gt;</code> component is added, which is also yet another custom component stored in <code class=\"language-text\">/src/components/bio.js</code>. That does another graphQL query and fills in my picture, bio information, etc. as seen below.</p>\n<p>Then, finally, the navigation component is added, with links to the next and previous blog.</p>\n<h3>So, how does gatsby-node.js tie this all together?</h3>\n<p>It uses gatsby’s node API, exposed through the <code class=\"language-text\">exports</code> object.</p>\n<p>In particular, the <code class=\"language-text\">createPages()</code> method. This method takes in the parameters <code class=\"language-text\">graphQL</code> and <code class=\"language-text\">actions</code> from an object passed in (the template uses object deconstruction syntax: <code class=\"language-text\">createPages({graphQL, actions})</code>).</p>\n<ul>\n<li><code class=\"language-text\">graphQL</code> gives functionality to use the GraphQL query language to look at</li>\n<li><code class=\"language-text\">actions</code> contains the action <code class=\"language-text\">createPage</code> which actually creates the page (see below)</li>\n</ul>\n<p>Within that, a GraphQL query retrieves the first 1000 markdown posts (in descending order), and parses their slug, and title. If you recognize this, this is what is passed as a context later.</p>\n<p>A loop iterates through all instances (Gatsby.js calls them <code class=\"language-text\">edges</code>) and calls the <code class=\"language-text\">createPage()</code> action that determines the path of the blog post (based on the slug), the component to use (blog-post.js), and the context (slug and title). THIS is where the pages are created.</p>\n<p>gatsby-node.js also calls exports.onCreateNode(), which I frankly have no idea what it does. I have been looking into the documentation on Gatsby.js’ data storage system (which, as mentioned, is based on nodes), and I’m not entirely sure what the purpose of creating new nodes are, and how that affects anything. I believe this step retrieves a file path to the node, the node itself, and the slug of the posts, and stores that within the gatsby data system.</p>\n<h3>Anything else?</h3>\n<p>There are a few more things that I have not yet gotten into, namely:</p>\n<ul>\n<li>When the /content/assets/ folder is used</li>\n<li>How <code class=\"language-text\">/src/utils/typography.js</code> interacts with the <code class=\"language-text\">gatsby-plugin-react-helmet</code> and <code class=\"language-text\">gatsby-plugin-typography</code> plugins (though, I think that’s self-explanatory)</li>\n<li>What <code class=\"language-text\">gatsby-browser.js</code> does</li>\n</ul>\n<p>But these are mainly stylistic choices, that I might go into in a later blog post. I plan on adding more css-based styling, and javascript animations soon, so I hope I’ll get to implementing that.</p>\n<h1>Concluding Remarks</h1>\n<p>In all, this was an extremely insightful process, and I feel like I’ve learnt SO much about web development. I know I have barely even scratched the surface, but looking into all of this, and reading up on how all of this works together has been extremely fun. If you’ve gotten to this point of the blog post, I sincerely applaud you and thank you for your patience. I hope you enjoyed that read.</p>\n<p>Until next time,<br>\n<br>\n<br>\nKeith Choa</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto;  max-width: 590px;\"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e962d218d8ea207e422354ec68041c30/f0881/000016.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.89189189189189%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAUBAwT/xAAVAQEBAAAAAAAAAAAAAAAAAAACAf/aAAwDAQACEAMQAAABcQkvo3iYZ//EABgQAAMBAQAAAAAAAAAAAAAAAAABAhED/9oACAEBAAEFAsRiMknpZXd47P/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABcQAAMBAAAAAAAAAAAAAAAAAAAQMTL/2gAIAQEABj8CVNEX/8QAGxABAAICAwAAAAAAAAAAAAAAAQARITFBUWH/2gAIAQEAAT8hw8R7o36QtOXiRhURFup//9oADAMBAAIAAwAAABDPD//EABcRAQEBAQAAAAAAAAAAAAAAAAEAURH/2gAIAQMBAT8QUy6Zf//EABcRAAMBAAAAAAAAAAAAAAAAAAABYRH/2gAIAQIBAT8QTptP/8QAGxAAAwADAQEAAAAAAAAAAAAAAAERITFxQZH/2gAIAQEAAT8QWEn9EWUhvKdRRX9xtDMZ9ZPkVWqf/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"This beautiful picture of Taal Volcano\"\n        title=\"This beautiful picture of Taal Volcano\"\n        src=\"/static/e962d218d8ea207e422354ec68041c30/1c72d/000016.jpg\"\n        srcset=\"/static/e962d218d8ea207e422354ec68041c30/a80bd/000016.jpg 148w,\n/static/e962d218d8ea207e422354ec68041c30/1c91a/000016.jpg 295w,\n/static/e962d218d8ea207e422354ec68041c30/1c72d/000016.jpg 590w,\n/static/e962d218d8ea207e422354ec68041c30/a8a14/000016.jpg 885w,\n/static/e962d218d8ea207e422354ec68041c30/fbd2c/000016.jpg 1180w,\n/static/e962d218d8ea207e422354ec68041c30/f0881/000016.jpg 3637w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"Learning What Ties This All Together!","date":"April 30, 2020","description":null}}},"pageContext":{"slug":"/learning-what-ties-this-all-together/","previous":null,"next":{"fields":{"slug":"/hello-world/"},"frontmatter":{"title":"Hello, World!"}}}}}